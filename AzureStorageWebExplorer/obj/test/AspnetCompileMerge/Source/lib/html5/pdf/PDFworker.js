(function(b){ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=function(b,a){void 0===b&&(b=0);void 0===a&&(a=this.byteLength);b=Math.floor(b);a=Math.floor(a);0>b&&(b+=this.byteLength);0>a&&(a+=this.byteLength);b=Math.min(Math.max(0,b),this.byteLength);a=Math.min(Math.max(0,a),this.byteLength);if(0>=a-b)return new ArrayBuffer(0);var f=new ArrayBuffer(a-b),g=new Uint8Array(f),d=new Uint8Array(this,b,a-b);g.set(d);return f})})(this);function createPromiseCapability(){var b={};b.promise=new Promise(function(h,a){b.resolve=h;b.reject=a});return b}
(function(b){function h(a){this._status=0;this._handlers=[];try{a.call(this,this._resolve.bind(this),this._reject.bind(this))}catch(d){this._reject(d)}}if(b.Promise)"function"!==typeof b.Promise.all&&(b.Promise.all=function(a){var d=0,c=[],f,l,h=new b.Promise(function(a,g){f=a;l=g});a.forEach(function(a,g){d++;a.then(function(a){c[g]=a;d--;0===d&&f(c)},l)});0===d&&f(c);return h}),"function"!==typeof b.Promise.resolve&&(b.Promise.resolve=function(a){return new b.Promise(function(d){d(a)})}),"function"!==
typeof b.Promise.reject&&(b.Promise.reject=function(a){return new b.Promise(function(d,c){c(a)})}),"function"!==typeof b.Promise.prototype["catch"]&&(b.Promise.prototype["catch"]=function(a){return b.Promise.prototype.then(void 0,a)});else{var a="function"===typeof setImmediate&&setImmediate||function(a){setTimeout(a,1)},f={handlers:[],running:!1,unhandledRejections:[],pendingRejectionCheck:!1,scheduleHandlers:function(g){0!==g._status&&(this.handlers=this.handlers.concat(g._handlers),g._handlers=
[],this.running||(this.running=!0,a(this.runHandlers.bind(this),0)))},runHandlers:function(){for(var g=Date.now()+1;0<this.handlers.length;){var d=this.handlers.shift(),c=d.thisPromise._status,f=d.thisPromise._value;try{1===c?"function"===typeof d.onResolve&&(f=d.onResolve(f)):"function"===typeof d.onReject&&(f=d.onReject(f),c=1,d.thisPromise._unhandledRejection&&this.removeUnhandeledRejection(d.thisPromise))}catch(b){c=2,f=b}d.nextPromise._updateStatus(c,f);if(Date.now()>=g)break}0<this.handlers.length?
a(this.runHandlers.bind(this),0):this.running=!1},addUnhandledRejection:function(a){this.unhandledRejections.push({promise:a,time:Date.now()});this.scheduleRejectionCheck()},removeUnhandeledRejection:function(a){a._unhandledRejection=!1;for(var f=0;f<this.unhandledRejections.length;f++)this.unhandledRejections[f].promise===a&&(this.unhandledRejections.splice(f),f--)},scheduleRejectionCheck:function(){this.pendingRejectionCheck||(this.pendingRejectionCheck=!0,setTimeout(function(){this.pendingRejectionCheck=
!1;for(var a=Date.now(),f=0;f<this.unhandledRejections.length;f++)if(500<a-this.unhandledRejections[f].time){var c=this.unhandledRejections[f].promise._value,b="Unhandled rejection: "+c;c.stack&&(b+="\n"+c.stack);warn(b);this.unhandledRejections.splice(f);f--}this.unhandledRejections.length&&this.scheduleRejectionCheck()}.bind(this),500))}};h.all=function(a){function f(e){2!==l._status&&(m=[],b(e))}var c,b,l=new h(function(e,k){c=e;b=k}),t=a.length,m=[];if(0===t)return c(m),l;for(var p=0,r=a.length;p<
r;++p){var e=a[p],k=function(e){return function(k){2!==l._status&&(m[e]=k,t--,0===t&&c(m))}}(p);h.isPromise(e)?e.then(k,f):k(e)}return l};h.isPromise=function(a){return a&&"function"===typeof a.then};h.resolve=function(a){return new h(function(f){f(a)})};h.reject=function(a){return new h(function(f,c){c(a)})};h.prototype={_status:null,_value:null,_handlers:null,_unhandledRejection:null,_updateStatus:function(a,b){1!==this._status&&2!==this._status&&(1===a&&h.isPromise(b)?b.then(this._updateStatus.bind(this,
1),this._updateStatus.bind(this,2)):(this._status=a,this._value=b,2===a&&0===this._handlers.length&&(this._unhandledRejection=!0,f.addUnhandledRejection(this)),f.scheduleHandlers(this)))},_resolve:function(a){this._updateStatus(1,a)},_reject:function(a){this._updateStatus(2,a)},then:function(a,b){var c=new h(function(a,f){this.resolve=a;this.reject=f});this._handlers.push({thisPromise:this,onResolve:a,onReject:b,nextPromise:c});f.scheduleHandlers(this);return c},"catch":function(a){return this.then(void 0,
a)}};b.Promise=h}})("undefined"===typeof window?this:window);(function(b){var h=function(a,f){var b=function(a){a=this["catch"](a);return{cancel:f,promise:a,then:d.bind(a),"catch":b.bind(a)}},d=function(a,h){var l=this.then(a,h);return{cancel:f,promise:l,then:d.bind(l),"catch":b.bind(l)}};return{cancel:f,promise:a,then:d.bind(a),"catch":b.bind(a)}};b.CancellablePromise=function(a,f){var b=!1,d,c=new Promise(function(c,h){d=function(){b||(f(),h("cancelled"))};(new Promise(a)).then(function(a){b=!0;c(a)},function(a){b=!0;h(a)})});return h(c,d)};b.CancellablePromise.all=
function(a){var f=Promise.all(a);return h(f,function(){a.forEach(function(a,f){a.cancel&&a.cancel()})})}})("undefined"===typeof self?this:self);var comObjToHandler={};
(function(b){b.MessageHandler=function(h,a){this.name=h;this.comObj=a;this.callbackIndex=1;this.postMessageTransfers=!0;var f=this.callbacksCapabilities={},g=this.actionHandler={},d=this.actionHandlerAsync={};this.nextAsync=null;var c=this,n=!1;g.console_log=[function(a){console.log(a)}];g.console_error=[function(a){b.utils.error(a)}];g.workerLoaded=[function(a){}];g.worker_restart=[function(f){var d=a,g=comObjToHandler[d];setTimeout(function(){d.removeEventListener("message",g);d.terminate();d=null},
5E3);c.newWorker=new Worker(f.location);c.tempWorker={redirectQueue:[],queue:[],postMessage:function(a,f){this.queue[this.queue.length]={msg:a,transfers:f}}};console.warn("Worker Resize required. Note that changes to PDF documents may be lost.");b.utils.log("I resize "+f.size);c.comObj=a=c.tempWorker;comObjToHandler[c.newWorker]=g;c.newWorker.addEventListener("message",g);d.onerror&&(c.newWorker.onerror=c.tempWorker.onerror=d.onerror);c.oldQueue=f.queue;f.queue=null;f.array=new Uint8Array([this.postMessageTransfers?
255:0]);n||(c.replace("test",function(f){c.comObj=a=c.newWorker;for(f=0;f<c.oldQueue.length;++f){var b=c.oldQueue[f];c.postMessage(b)}for(f=0;f<c.tempWorker.redirectQueue.length;++f)b=c.tempWorker.redirectQueue[f],c.postMessage(b);for(f=0;f<c.tempWorker.queue.length;++f)b=c.tempWorker.queue[f],c.comObj.postMessage(b.msg,b.transfers);c.oldQueue=null;c.tempWorker=null;c.newWorker=null}),n=!0);c.newWorker.postMessage({action:"test",data:f})}];g.redirect_request=[function(f){a.redirectQueue?a.redirectQueue[a.redirectQueue.length]=
f:(b.utils.log("Redirect Request needed to be posted."),c.postMessage(f))}];a in comObjToHandler&&a.removeEventListener("message",comObjToHandler[a]);comObjToHandler[a]=function(a){var h=a.data,n=function(e){if(e.message||e.errorData){e.message&&e.message.message&&(e.message=e.message.message);var k=e.errorData;e={type:e.type?e.type:"JavascriptError",message:e.message};if(k)for(var a in k)k.hasOwnProperty(a)&&(e[a]=k[a])}c.postMessage({isReply:!0,callbackId:h.callbackId,error:e})};if(h.isReply)if(a=
h.callbackId,a in f){var p=f[a];delete f[a];"error"in h?p.reject(h.error):p.resolve(h.data)}else b.utils.warn("Cannot resolve callback "+a);else if(h.action in g){var r=g[h.action];h.callbackId?Promise.resolve().then(function(){return r[0].call(r[1],h.data)}).then(function(e){c.postMessage({isReply:!0,callbackId:h.callbackId,data:e})},function(e){n(e)}):r[0].call(r[1],h.data)}else h.action in d?(r=d[h.action],a=createPromiseCapability(),h.callbackId?a.promise.then(function(e){c.postMessage({isReply:!0,
callbackId:h.callbackId,data:e});c.nextAsync()},function(e){n(e);c.nextAsync()}):a.promise.then(function(e){c.nextAsync()},function(e){c.nextAsync()}),r[0].call(r[1],h,a)):b.utils.error("Unknown action from worker: "+h.action)};a.addEventListener("message",comObjToHandler[a])};b.MessageHandler.prototype={on:function(h,a,f){var g=this.actionHandler;g[h]&&b.utils.error('There is already an actionName called "'+h+'"');g[h]=[a,f]},replace:function(b,a,f){this.actionHandler[b]=[a,f]},onAsync:function(h,
a,f){var g=this.actionHandlerAsync;g[h]&&b.utils.error('There is already an actionName called "'+h+'"');g[h]=[a,f]},replaceAsync:function(b,a,f){var g=this.actionHandlerAsync,d=this.actionHandler;d[b]&&delete d[b];g[b]=[a,f]},onNextAsync:function(b){this.nextAsync=b},send:function(b,a){this.postMessage({action:b,data:a})},getNextId:function(){return this.callbackIndex++},sendWithPromise:function(b,a,f){var g=this.getNextId();b={action:b,data:a,callbackId:g,priority:f};a=createPromiseCapability();
this.callbacksCapabilities[g]=a;try{this.postMessage(b)}catch(d){a.reject(d)}return a.promise},sendWithPromiseReturnId:function(b,a,f){var g=this.getNextId();b={action:b,data:a,callbackId:g,priority:f};a=createPromiseCapability();this.callbacksCapabilities[g]=a;try{this.postMessage(b)}catch(d){a.reject(d)}return{promise:a.promise,callbackId:g}},sendWithPromiseWithId:function(h,a,f,g){a>this.callbackIndex&&b.utils.error("Can't reuse callbackId "+a+" lesser than callbackIndex "+this.callbackIndex);
a in this.callbacksCapabilities&&b.utils.error("Can't reuse callbackId "+a+". There is a capability waiting to be resolved. ");h={action:h,data:f,callbackId:a};f=createPromiseCapability();this.callbacksCapabilities[a]=f;try{this.postMessage(h)}catch(d){f.reject(d)}return f.promise},getPromise:function(h){if(h in this.callbacksCapabilities)return this.callbacksCapabilities[h];b.utils.error("Cannot get promise for callback "+h)},cancelPromise:function(h){if(h in this.callbacksCapabilities){var a=this.callbacksCapabilities[h];
delete this.callbacksCapabilities[h];a.reject({type:"Cancelled",message:"Request has been cancelled."});this.postMessage({action:"actionCancel",data:{callbackId:h}})}else b.utils.warn("Cannot cancel callback "+h)},postMessage:function(b){if(this.postMessageTransfers){var a=this.getTransfersArray(b);this.comObj.postMessage(b,a)}else this.comObj.postMessage(b)},getObjectTransfers:function(b,a){if("object"===typeof b)if(b instanceof Uint8Array)a.push(b.buffer);else if(b instanceof ArrayBuffer)a.push(b);
else for(prop in b)b.hasOwnProperty(prop)&&this.getObjectTransfers(b[prop],a)},getTransfersArray:function(b){var a=[];this.getObjectTransfers(b,a);return 0==a.length?void 0:a}}})("undefined"===typeof window?this:window);(function(b){var h=b._trnDebugMode;"undefined"===typeof b.utils&&(b.utils={warn:function(a){h&&console.warn(a)},log:function(a){h&&console.log(a)},error:function(a){h&&console.error(a);throw Error(a);}});b.info=function(a){b.utils.log(a)};b.warn=function(a){b.utils.warn(a)};b.error=function(a){b.utils.error(a)}})("undefined"===typeof window?this:window);(function(b){b.Module={TOTAL_MEMORY:50331648,noExitRuntime:!0,devicePixelRatio:1,cur_doc:null,cache_ptr_size:0,has_buf_ownership:!0,loaded:!1,init_cb:null,cache_ptr:null,cleanupState:null,stopped:!1,docs:{},postEvent:function(b,a,f){Module.workerMessageHandler.send("event",{docId:b,type:a,data:f})},postPagesUpdatedEvent:function(b,a,f){b={pageDimensions:Module.GetPageDimensions(b)};if(f)for(var g=0;g<f.length;++g)f[g]in b.pageDimensions?b.pageDimensions[f[g]].contentChanged=!0:console.warn("Invalid Page Number "+
f[g]);Module.postEvent(a,"pagesUpdated",b);return b},GetIndividualPageDimensions:function(b,a,f){b=Module.PageGetPageInfo(f);b.id=Module.PageGetId(f);return b},GetPageDimensionsRange:function(b,a,f){for(var g={},d=Module.PDFDocGetPageIterator(b,a);a<f&&Module.IteratorHasNext(d);++a){var c=Module.IteratorCurrent(d);g[a]=this.GetIndividualPageDimensions(b,a,c);Module.IteratorNext(d)}return g},GetPageDimensions:function(b){try{var a=Module.Runtime.stackSave(),f=Module.GetPageCount(b);if(0===f)throw"This document has no pages.";
return Module.GetPageDimensionsRange(b,1,f+1)}finally{Module.Runtime.stackRestore(a)}},loadDoc:function(b,a,f){"undefined"===typeof Module&&this._main();var g=null;try{var d=Module.Runtime.stackSave();f=Module.CreateDoc(b,a,f);var c=Module.GetDoc(f);if(Module.PDFDocInitSecurityHandler(c))return{docId:f,pageDimensions:Module.GetPageDimensions(c)};g={type:"NeedsPassword",errorData:{docId:f},message:"This document requires a password"}}catch(n){g={type:"InvalidPDF",message:n}}finally{Module.Runtime.stackRestore(d)}throw g;
},loadCanvas:function(b,a,f,g,d,c,n,l,t){var m=Module.GetDoc(b),p=a+1,r=function(){Module.RasterizePage(m,p,f,g,c,d,n,l,t)},e=Module.docs[b].chunkStorage;if(e){b=Module.GetDownloadData(m).downloader;var k=e.getRequiredChunkOffsetArrays(b,p);e.keepChunks(k.have);b=function(){var a=e.getChunks(k.missing);Module.loadPromise=a.then(function(){var e=Module.loadPromise.cancelled;Module.loadPromise=null;e||r()})["catch"](function(e){"cancelled"!==e?t.reject(e):Module.loadPromise=null})};Module.loadPromise?
Module.loadPromise.then(b,b):b()}else r()},loadResources:function(h,a){Module.Initialize(a);b.utils.log("PDFNet initialized!");Module.f0(!1);var f=new Uint8Array(h);Module.PDFNetSetResourceData(f)},_main:function(){enlargeMemory=function(){var b=Math.pow(2,31);if(DYNAMICTOP>=b)return!1;for(;TOTAL_MEMORY<=DYNAMICTOP;)if(TOTAL_MEMORY<b/2)TOTAL_MEMORY=alignMemoryPage(TOTAL_MEMORY+50331648),console.log("Enlarging Emscripten Heap To: "+TOTAL_MEMORY+" bytes");else{var a=TOTAL_MEMORY;TOTAL_MEMORY=alignMemoryPage((3*
TOTAL_MEMORY+b)/4);console.log("Enlarging Emscripten Heap To: "+TOTAL_MEMORY+" bytes");if(TOTAL_MEMORY<=a)return!1}TOTAL_MEMORY=Math.max(TOTAL_MEMORY,16777216);if(TOTAL_MEMORY>=b)return!1;try{if(ArrayBuffer.transfer)buffer=ArrayBuffer.transfer(buffer,TOTAL_MEMORY);else{var f=HEAP8;buffer=new ArrayBuffer(TOTAL_MEMORY)}}catch(g){return!1}if(!_emscripten_replace_memory(buffer))return!1;Module.buffer=buffer;Module.HEAP8=HEAP8=new Int8Array(buffer);Module.HEAP16=HEAP16=new Int16Array(buffer);Module.HEAP32=
HEAP32=new Int32Array(buffer);Module.HEAPU8=HEAPU8=new Uint8Array(buffer);Module.HEAPU16=HEAPU16=new Uint16Array(buffer);Module.HEAPU32=HEAPU32=new Uint32Array(buffer);Module.HEAPF32=HEAPF32=new Float32Array(buffer);Module.HEAPF64=HEAPF64=new Float64Array(buffer);ArrayBuffer.transfer||HEAP8.set(f);return!0};"undefined"===typeof Module&&(("undefined"!==typeof window?window:self).Module={});(function(h){h.PDFDocExportXFDF=function(a,b){var g=Module.GetDoc(a),d=Module.Runtime.stackSave(),c;try{var n=
b?Module.PDFDocFDFExtract(g,b):Module.PDFDocFDFExtract(g);c=Module.FDFDocSaveAsXFDF(n);Module.Runtime.stackRestore(d)}catch(l){throw Module.Runtime.stackRestore(d),l;}return c};h.PageArrayToPageSet=function(a){var b=Module.Runtime.stackSave(),g;try{g=Module.PageSetCreate();for(var d=0;d<a.length;++d)Module.PageSetAddPage(g,a[d]);Module.Runtime.stackRestore(b)}catch(c){throw Module.Runtime.stackRestore(b),c;}return g};h.cancelCurrent=function(){var a=Module.loadPromise;return a?(a.cancel(),a.cancelled=
!0):(a=Module.cleanupState)?(clearTimeout(a.timeout),a.cleanupArr.forEach(function(a){a()}),Module.cleanupState=null,!0):!1};h.SetWorkerRestartCallback=function(a){Module.workerRestartCallback=a};h.XFDFMerge=function(a,b){if(b){var g=[];try{for(var d=Module.PDFDocGetPageIterator(a,1);Module.IteratorHasNext(d);){var c=Module.IteratorCurrent(d);try{for(var n=Module.PageGetNumAnnots(c);0<n;){var l=Module.PageGetAnnot(c,--n);switch(Module.AnnotGetType(l)){case 1:case 16:case 17:case 18:case 19:break;
default:h.PageAnnotRemove(c,n)}}}catch(r){Module.ObjErase(c,"Annots")}Module.IteratorNext(d)}var t=Module.GetUStringFromJSString(b,!0);g.push(function(){Module.UStringDestroy(t)});var m=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f1(t,m));var p=Module.getValue(m,"i8*");g.push(function(){Module.FDFDocDestroy(p)});REX(Module.f2(a,p))}finally{g.forEach(function(a){a()})}}};h.MergeXFDF=function(a,b,g){var d=[];try{var c=Module.Runtime.stackSave();d[d.length]=function(){Module.Runtime.stackRestore(c)};
var n=Module.GetDoc(a);Module.XFDFMerge(n,b);setTimeout(function(){d.forEach(function(a){a()});g.resolve({})},0)}catch(l){Module.stopped||(d.forEach(function(a){a()}),g.reject(l))}};h.SaveHelper=function(a,b,g){g="undefined"===typeof g?2:g;Module.allocate(4,"i8",Module.ALLOC_STACK);Module.allocate(4,"i8",Module.ALLOC_STACK);Module.MakeDev(b);a=Module.f3(a,Module.GetUStringFromJSString(b),g,0);Module.docs[b].sink=null;REX(a);return Module.docs[b].buffer.buffer};h.SaveDoc=function(a,b,g,d,c){var n=
Module.GetDoc(a),l=[];try{var n=Module.GetDoc(a),h=Module.Runtime.stackSave();l[l.length]=function(){Module.Runtime.stackRestore(h)};Module.XFDFMerge(n,b);for(var m=Module.PDFDocGetPageIterator(n,1);Module.IteratorHasNext(m);){var p=Module.IteratorCurrent(m);try{for(var r=Module.PageGetNumAnnots(p);0<r;){var e=Module.PageGetAnnot(p,--r);Module.AnnotHasAppearance(e)||Module.AnnotRefreshAppearance(e)}}catch(u){Module.ObjErase(p,"Annots")}Module.IteratorNext(m)}b=0;if(d){var k=Module.PDFDocGetRoot(n);
(b=Module.ObjFindObj(k,"OpenAction"))&&Module.ObjPut(k,"__OpenActionBackup__",b);var v=Module.ObjPutDict(k,"OpenAction");Module.ObjPutName(v,"Type","Action");Module.ObjPutName(v,"S","JavaScript");Module.ObjPutString(v,"JS","this.print()")}var w=Module.SaveHelper(n,a);d&&(b?Module.ObjPut(k,"OpenAction",Module.ObjFindObj(k,"__OpenActionBackup__")):Module.ObjErase(k,"OpenAction"));setTimeout(function(){l.forEach(function(e){e()});if(g)c.resolve({fileData:w});else{var e=w.slice(0);c.resolve({fileData:e})}},
0)}catch(u){Module.stopped||(l.forEach(function(e){e()}),c.reject(u))}};h.GetCurrentCanvasData=function(a){var b=Module.currentRenderData;if(!b)return null;a&&REX(Module.f4(b.rast));a=new Uint8Array(new ArrayBuffer(b.buf_size));for(var g=0,d=0;d<b.out_height;++d)for(var c=b.bufPtr+b.stride*d,n=0;n<b.out_width;++n)a[g++]=Module.HEAPU8[c+2],a[g++]=Module.HEAPU8[c+1],a[g++]=Module.HEAPU8[c],a[g++]=Module.HEAPU8[c+3],c+=4;return{pageBuf:a.buffer,pageWidth:b.out_width,pageHeight:b.out_height}};h.RasterizePage=
function(a,f,g,d,c,n,l,h,m){Module.currentRenderData={};var p=Module.currentRenderData;p.out_width=parseInt(g);p.out_height=parseInt(d);var r=[];r.push(function(){Module.currentRenderData=null});try{var e=function(){try{for(var k=0,a=(new Date).getTime(),v=!1;200>k;){REX(Module.f12(E,B));if(!Module.getValue(B,"i8*")){v=!0;break}k=(new Date).getTime()-a}if(v){var f=Module.GetCurrentCanvasData(!1);b.utils.log("Total Page Time "+((new Date).getTime()-D));Module.stopped||(r.forEach(function(e){e()}),
m.resolve(f))}else Module.cleanupState.timeout=setTimeout(e,0)}catch(q){Module.stopped||(r.forEach(function(e){e()}),m.reject(q))}},k=Module.Runtime.stackSave();r[r.length]=function(){Module.Runtime.stackRestore(k)};var v=Module.GetPage(a,f),w=Module.PageGetPageWidth(v),u=Module.PageGetPageHeight(v);p.stride=4*p.out_width;p.buf_size=p.out_width*p.out_height*4;p.rast=Module.PDFRasterizerCreate();r.push(function(){Module.f5(p.rast)});if(l){var q=Module.EMSCreateUpdatedLayersContext(a,l);0!=q&&(Module.f6(p.rast,
q),r.push(function(){Module.f7(q)}))}REX(Module.f8(p.rast,h));var z=Module.PageGetRotation(v);a=1==n||3==n;var z=(1==z||3==z)!=a,x,A=Module.allocate(48,"i8",Module.ALLOC_STACK);if(c){c.x1=c[0];c.y1=c[1];c.x2=c[2];c.y2=c[3];noRotateDefaultMtxPtr=Module.PageGetDefaultMatrix(v,0);invMtxPtr=Module.Matrix2DInverse(noRotateDefaultMtxPtr);c=Module.Matrix2DMultBBox(invMtxPtr,c);var y;c.x2<c.x1&&(y=c.x1,c.x1=c.x2,c.x2=y);c.y2<c.y1&&(y=c.y1,c.y1=c.y2,c.y2=y);x=p.out_width/(z?c.y2-c.y1:c.x2-c.x1);mtxPtr=Module.GetDefaultMatrixBox(v,
c,n)}else mtxPtr=Module.PageGetDefaultMatrix(v,n),x=p.out_width/(a?u:w);Module.Matrix2DSet(A,x,0,0,x,0,0);Module.Matrix2DConcat(A,mtxPtr);p.bufPtr=Module._malloc(p.buf_size);Module._memset(p.bufPtr,255,p.buf_size);r.push(function(){Module._free(p.bufPtr)});var C=Module.allocate(4,"i8",Module.ALLOC_STACK),B=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f9(p.rast,0));REX(Module.f10(p.rast,v,p.bufPtr,p.out_width,p.out_height,p.stride,4,!0,A,0,0,0,C));var E=Module.getValue(C,"i8*");r.push(function(){REX(Module.f11(E))});
var D=(new Date).getTime(),G=setTimeout(e,0);Module.cleanupState={cleanupArr:r,timeout:G};r.push(function(){Module.cleanupState=null})}catch(F){Module.stopped||(r.forEach(function(e){e()}),m.reject(F))}};h.GetDestinationVPosHPos=function(a){var b=0,g=0,d=!1,c=!1,n=Module.DestinationGetPage(a),l=Module.DestinationGetExplicitDestObj(a),n=Module.PageGetDefaultMatrix(n),n=Module.Matrix2DInverse(n),h=Module.Matrix2DMult(n,{x:g,y:b}),g=h.x,b=h.y,m;try{switch(Module.DestinationGetFitType(a)){case 2:case 6:m=
Module.ObjGetAt(l,2);Module.ObjIsNumber(m)&&(b=Module.ObjGetNumber(m),d=!0);break;case 0:m=Module.ObjGetAt(l,2);Module.ObjIsNumber(m)&&(g=Module.ObjGetNumber(m),c=!0);m=Module.ObjGetAt(l,3);Module.ObjIsNumber(m)&&(b=Module.ObjGetNumber(m),d=!0);break;case 4:m=Module.ObjGetAt(l,2);Module.ObjIsNumber(m)&&(g=Module.ObjGetNumber(m),c=!0);m=Module.ObjGetAt(l,5);Module.ObjIsNumber(m)&&(b=Module.ObjGetNumber(m),d=!0);break;case 3:case 7:m=Module.ObjGetAt(l,2),Module.ObjIsNumber(m)&&(g=Module.ObjGetNumber(m),
c=!0)}h=Module.Matrix2DMult(n,{x:g,y:b});g=h.x;b=h.y;d||(b=0);c||(g=0)}catch(p){g=b=0}return{hpos:g,vpos:b}};h.FillBookmarkTree=function(a,b){for(var g=0;Module.BookmarkIsValid(a);a=Module.BookmarkGetNext(a),++g)try{var d=[];if(Module.BookmarkHasChildren(a)){var c=Module.BookmarkGetFirstChild(a);Module.FillBookmarkTree(c,d)}var n=Module.BookmarkGetTitle(a),d={children:d,name:n},l=Module.BookmarkGetAction(a);if(Module.ActionIsValid(l)){var h=Module.ActionGetType(l);if(0==h){var m=Module.ActionGetDest(l);
if(Module.DestinationIsValid(m)){var p=Module.DestinationGetPage(m);if(Module.PageIsValid(p)){var r=Module.PageGetIndex(p);if(0<r){d.pageNumber=r;var e=Module.GetDestinationVPosHPos(m);d.verticalOffset=e.vpos;d.horizontalOffset=e.hpos}}}}else if(5==h){var k=Module.ObjFindObj(l,"URI");k&&(d.url=Module.ObjGetAsPDFText(k))}}b[b.length]=d}catch(v){}};h.LoadBookmarks=function(a){a=Module.GetDoc(a);var b=[],g=Module.Runtime.stackSave();try{var d=Module.PDFDocGetFirstBookmark(a);Module.BookmarkIsValid(d)&&
Module.FillBookmarkTree(d,b)}catch(c){}Module.Runtime.stackRestore(g);return{bookmarks:b}};h.UpdatePassword=function(a,b){try{var g=Module.Runtime.stackSave(),d=Module.GetDoc(a);return Module.PDFDocInitStdSecurityHandler(d,b)?(d in downloadDataMap&&REX(Module.f13(d,downloadDataMap[d].downloader)),{success:!0,pageDimensions:Module.GetPageDimensions(d)}):{success:!1}}finally{Module.Runtime.stackRestore(g)}};h.GetTextData=function(a,b,g){a=Module.GetDoc(a);var d=[];try{var c=Module.Runtime.stackSave();
d[d.length]=function(){Module.Runtime.stackRestore(c)};var n=Module.GetPage(a,b),l=Module.allocate(8,"i8",Module.ALLOC_STACK);REX(Module.f14(l));var h=Module.getValue(l,"i8*");d[d.length]=function(){f15(h)};REX(Module.f16(h,n,0,0));var m=Module.allocate(48,"i8",Module.ALLOC_STACK);REX(Module.f17(n,!0,1,0,m));var p=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f18(h,m,0,p));var r=Module.getValue(p,"i8*"),e=Module._malloc(8*r);d[d.length]=function(){Module._free(e)};REX(Module.f18(h,m,e,p));
var k=Module.GetJSDoubleArrFromCore(e,r),v=Module.allocate(4,"i8",Module.ALLOC_STACK),w=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f19(w));d[d.length]=function(){Module.f20(u)};var u=Module.getValue(w,"i8*");REX(Module.f21(h,u,0,v));var q=Module.GetJSStringFromUString(u),z=Module.getValue(v,"i8*"),x=Module._malloc(4*z);d[d.length]=function(){Module._free(x)};REX(Module.f21(h,u,x,v));var A=Module.GetJSIntArrayFromCore(x,z),y=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f22(h,m,
0,y));var C=Module.getValue(y,"i8*"),B=Module._malloc(8*C);d[d.length]=function(){Module._free(B)};REX(Module.f22(h,m,B,y));var E=Module.GetJSDoubleArrFromCore(B,C);setTimeout(function(){d.forEach(function(e){e()});g.resolve({str:q,quads:k,offsets:A,struct:E})},0)}catch(D){Module.stopped||(d.forEach(function(e){e()}),g.reject(D))}};h.InsertBlankPages=function(a,b,g,d,c){var n=[],h=Module.GetDoc(a);try{var t=Module.Runtime.stackSave();n[n.length]=function(){Module.Runtime.stackRestore(t)};for(var m=
b.length-1;0<=m;--m){var p=Module.PDFDocGetPageIterator(h,b[m]),r=Module.PDFDocPageCreate(h,g,d);Module.PDFDocPageInsert(h,p,r)}var e=Module.postPagesUpdatedEvent(h,a);setTimeout(function(){Module.stopped||(n.forEach(function(e){e()}),c.resolve(e))},0)}catch(k){Module.stopped||(n.forEach(function(e){e()}),c.reject(k))}};h.InsertPages=function(a,b,g,d,c,h){var l=[],t=Module.GetDoc(a);try{var m=Module.Runtime.stackSave();l[l.length]=function(){Module.Runtime.stackRestore(m)};var p;if(b instanceof ArrayBuffer){var r=
Module.CreateDoc(b);p=Module.GetDoc(r);l[l.length]=function(){Module.DeleteDoc(r)}}else p=Module.GetDoc(b);var e=g.length,k=Module.PageSetCreate();for(b=0;b<e;++b)Module.PageSetAddPage(k,g[b]);Module.PDFDocInsertPages(t,d,p,k,c);Module.GetPageDimensions(t);var v=Module.PageSetCreateRange(d,d+e);Module.PDFDocExportXFDF(a,v);var w=Module.postPagesUpdatedEvent(t,a);setTimeout(function(){l.forEach(function(e){e()});h.resolve(w)},0)}catch(u){Module.stopped||(l.forEach(function(e){e()}),h.reject(u))}};
h.MovePages=function(a,b,g,d){var c=[],h=Module.GetDoc(a);try{var l=Module.Runtime.stackSave();c[c.length]=function(){Module.Runtime.stackRestore(l)};for(var t=b.length,m=Module.PageSetCreate(),p=0;p<t;++p)Module.PageSetAddPage(m,b[p]);Module.PDFDocMovePages(h,g,m);var r=Module.postPagesUpdatedEvent(h,a);setTimeout(function(){Module.stopped||(c.forEach(function(e){e()}),d.resolve(r))},0)}catch(e){Module.stopped||(c.forEach(function(e){e()}),d.reject(e))}};h.RemovePages=function(a,b,g){var d=Module.GetDoc(a),
c=[];try{var h=Module.Runtime.stackSave();c[c.length]=function(){Module.Runtime.stackRestore(h)};for(var l=b.length-1;0<=l;--l){var t=Module.PDFDocGetPageIterator(d,b[l]);Module.IteratorHasNext(t)&&Module.PDFDocPageRemove(d,t)}var m=Module.postPagesUpdatedEvent(d,a);setTimeout(function(){c.forEach(function(a){a()});g.resolve(m)},0)}catch(p){Module.stopped||(c.forEach(function(a){a()}),g.reject(p))}};h.RotatePages=function(a,b,g,d){var c=Module.GetDoc(a),h=[];try{var l=Module.Runtime.stackSave();h[h.length]=
function(){Module.Runtime.stackRestore(l)};var t=b.length,m=0,p=Module.PDFDocGetPageIterator(c,b[0]),r=[];h.push(function(){Module.f23(p)});for(var e=b[0];Module.IteratorHasNext(p)&&m<b[t-1];++e){if(e===b[m]){var k=Module.IteratorCurrent(p),v=(Module.PageGetRotation(k)+g)%4;Module.PageSetRotation(k,v);r.push(e);m++}Module.IteratorNext(p)}var w=Module.postPagesUpdatedEvent(c,a,r);setTimeout(function(){h.forEach(function(e){e()});d.resolve(w)},0)}catch(u){Module.stopped||(h.forEach(function(e){e()}),
d.reject(u))}};h.ExtractPages=function(a,b,g,d){var c=[];try{var h=Module.Runtime.stackSave();c[c.length]=function(){Module.Runtime.stackRestore(h)};var l=function(a){Module.stopped||(c.forEach(function(a){a()}),d.reject(a))};Module.XFDFMerge(a,g);var t=Module.CreateEmptyDoc(),m=createPromiseCapability();c[c.length]=function(){Module.DeleteDoc(t)};m.promise.then(function(a){d.promise.then(function(a){c.forEach(function(e){e()});return a},l);Module.SaveDoc(t,void 0,!0,!1,d)},l);Module.InsertPages(t,
a,b,1,!0,m)}catch(p){l(p)}};h.CropPages=function(a,b,g,d,c,h,l){var t=Module.GetDoc(a),m=[];try{var p=Module.Runtime.stackSave();m[m.length]=function(){Module.Runtime.stackRestore(p)};var r=b.length,e=0,k=Module.PDFDocGetPageIterator(t,b[0]);m.push(function(){Module.f23(k)});for(var v=b[0];Module.IteratorHasNext(k)&&e<b[r-1];++v){if(v===b[e]){var w=Module.IteratorCurrent(k),u=Module.allocate(8,"i8",Module.ALLOC_STACK);REX(Module.f24(w,u));var q=Module.PageGetRotation(w),z=Module.getValue(u,"double"),
x=Module.getValue(u+8,"double"),A=Module.getValue(u+16,"double"),y=Module.getValue(u+24,"double");0===q%4?(Module.setValue(u,z+c,"double"),Module.setValue(u+8,x+d,"double"),Module.setValue(u+16,A-h,"double"),Module.setValue(u+24,y-g,"double")):1===q%4?(Module.setValue(u,z+g,"double"),Module.setValue(u+8,x+c,"double"),Module.setValue(u+16,A-d,"double"),Module.setValue(u+24,y-h,"double")):2===q%4?(Module.setValue(u,z+h,"double"),Module.setValue(u+8,x+g,"double"),Module.setValue(u+16,A-c,"double"),Module.setValue(u+
24,y-d,"double")):3===q%4&&(Module.setValue(u,z+d,"double"),Module.setValue(u+8,x+h,"double"),Module.setValue(u+16,A-g,"double"),Module.setValue(u+24,y-c,"double"));Module.setValue(u+32,0,"double");REX(Module.f25(w,u));e++}Module.IteratorNext(k)}var C=Module.postPagesUpdatedEvent(t,a);setTimeout(function(){m.forEach(function(e){e()});l.resolve(C)},0)}catch(B){Module.stopped||(m.forEach(function(e){e()}),l.reject(B))}}})("undefined"===typeof self?this.Module:self.Module);this.loaded=!0;Module.init_cb&&
Module.init_cb()}}})("undefined"===typeof self?this:self);var global="undefined"!==typeof window?window:self;"undefined"===typeof Module&&(global.Module={});var crawp=Module.crap;
(function(b){b.currentFileString="/current";var h=0,a=0,f={},g=null,d=function(e,k,a,b){var c=new XMLHttpRequest;return CancellablePromise(function(q,d){c.open("GET",e,!0);c.responseType="arraybuffer";c.onerror=function(){d("Network error occurred")};c.onload=function(e){206==this.status&&c.response.byteLength==a?(e=new Int8Array(c.response),q(e)):d("Download Failed")};var f=["bytes=",k,"-",k+a-1].join("");c.setRequestHeader("Range",f);if(b)for(var g in b)c.setRequestHeader(g,b[g]);c.send()},function(){c.abort()})},
c=function(e){this.file=e;this.position=0;this.length=e.size;this.reader=new FileReaderSync};c.prototype={read:function(e,k,a){a=this.position+a<=this.length?a:this.length-this.position;e=e.subarray(k,k+a);k=new Int8Array(this.reader.readAsArrayBuffer(this.file.slice(this.position,this.position+a)));e.set(k);this.position+=a;return a},seek:function(e){this.position=e},close:function(){this.reader=this.file=null},getPos:function(){return this.position},getTotalSize:function(){return this.length}};
var n=function(e){this.data=e;this.position=0;this.length=this.data.length};n.prototype={read:function(e,k,a){a=this.position+a<=this.length?a:this.length-this.position;e=e.subarray(k,k+a);k=this.data.subarray(this.position,this.position+a);e.set(k);this.position+=a;return a},write:function(e,k,a){a=this.position+a<=this.length?a:this.length-this.position;e=e.subarray(k,k+a);this.data.subarray(this.position,this.position+a).set(e);this.position+=a;return a},seek:function(e){this.position=e},close:function(){this.data=
null},getPos:function(){return this.position},getTotalSize:function(){return this.length}};var l=function(e,k,a,b){"object"===typeof e?(this.lruList=e.lruList,this.chunkMap=e.chunkMap,this.length=e.length,this.url=e.url,this.customHeaders=e.customHeaders):(this.lruList=[],this.chunkMap={},this.chunkMap[k]=b,this.length=k,this.url=e,this.customHeaders=a)};l.prototype={lruUpdate:function(e){var k=this.lruList.lastIndexOf(e);0<=k&&this.lruList.splice(k,1);this.lruList.push(e)},getChunk:function(e){if(this.chunkMap[e])this.lruUpdate(e);
else{var k=Math.min(e+524288,this.length)-1;Date.now();var a=new XMLHttpRequest;a.open("GET",this.url,!1);a.responseType="arraybuffer";a.setRequestHeader("Range",["bytes=",e,"-",k].join(""));if(this.customHeaders)for(var b in this.customHeaders)a.setRequestHeader(b,this.customHeaders[b]);a.send();if(200==a.status||206==a.status)this.writeChunk(new Int8Array(a.response),e);else throw Error("Failed to load data from");}return this.chunkMap[e]},hadChunk:function(e){return e in this.chunkMap},hasChunk:function(e){return this.chunkMap[e]},
getCacheData:function(){return this.chunkMap[this.length]},getRequiredChunkOffsetArrays:function(e,k){var a={have:[],downloading:[],missing:[]};try{var b=Module.Runtime.stackSave(),c=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f26(e,k,c));var q=Module.getValue(c,"i8*");if(q){var d=Module._malloc(4*q);REX(Module.f27(e,k,d,q));for(c=0;c<q;++c){var f=Module.getValue(d+4*c,"i8*");this.hasChunk(f)?a.have.push(f):this.hadChunk(f)?a.missing.push(f):a.downloading.push(f)}}}finally{d&&Module._free(d),
Module.Runtime.stackRestore(b)}return a},keepVisibleChunks:function(e,k){for(var a=k.length,b=0,c=0;c<a;++c){var q=this.getRequiredChunkOffsetArrays(e,k[c]),d=q.have,f=d.length,b=b+f;if(100<b){this.keepChunks(d.slice(0,f-b+100));break}this.keepChunks(q.have)}},getChunkAsync:function(e){var k=this,a=e+524288,b=524288;a>this.length&&(b-=a-this.length);return d(this.url,e,b,this.customHeaders).then(function(a){k.writeChunk(a,e)})},getChunks:function(e){for(var k=e.length,a=Array(k),b=0;b<k;++b)a[b]=
this.getChunkAsync(e[b]);return CancellablePromise.all(a)},keepChunks:function(e){for(var k=e.length,a=0;a<k;++a)this.lruUpdate(e[a])},writeChunk:function(e,k,a){a=a?a:0;var b=this.chunkMap[k],c=e.length,q=200<=this.lruList.length&&!b;524288!=c||e.buffer.byteLength!=c?(q?(q=this.lruList.shift(),b=this.chunkMap[q],524288>b.length&&(b=new Int8Array(524288)),this.chunkMap[q]=null):b=b?this.chunkMap[k]:new Int8Array(524288),b.subarray(a,a+c).set(e),e=b):q&&(q=this.lruList.shift(),this.chunkMap[q]=null);
this.lruUpdate(k);this.chunkMap[k]=e}};var t=function(e){this.chunkStorage=e;this.position=0;this.length=this.chunkStorage.length};t.prototype={read:function(e,k,a){var b=this.position+a<=this.length,c=b?a:this.length-this.position;if(this.position<this.length){var q;for(q=0;q<c;){var d=this.position%524288,f=this.position-d,g=c-q;if(this.chunkStorage.hadChunk(f)){var f=this.chunkStorage.getChunk(f),h=e.subarray(k+q,k+q+g),d=f.subarray(d,d+g);h.set(d);d=d.length;q+=d;this.position+=d}else for(this.position+=
g;q<c;++q)h[q]=0}}if(!b){h=k+c;if(a-=c)k=this.chunkStorage.getCacheData(),a>k.length&&(a=k.length),b=this.position-this.length,h=e.subarray(h,h+a),d=k.subarray(b,b+a),h.set(d);this.position+=a;return c+a}return c},write:function(e,a,b){var c=this.position+b<=this.length,d=this.position+b<=this.length?b:this.length-this.position,q=e.subarray(a,a+d),f=this.position%524288;this.chunkStorage.writeChunk(q,this.position-f,f);this.position+=d;if(!c){q=a+d;if(b-=d)a=this.chunkStorage.getCacheData(),b>a.length&&
(b=a.length),c=this.position-this.length,q=e.subarray(q,q+b),a.subarray(c,c+b).set(q);this.position+=b;return d+b}return d},seek:function(e){this.position=e},close:function(){this.chunkStorage=null},getPos:function(){return this.position},getTotalSize:function(){return this.length}};var m=function(e){this.docId=e;this.length=0;this.data=new Int8Array(8192);this.position=0};m.prototype={seek:function(e){this.position=e},close:function(){var e=new Int8Array(this.data.buffer.slice(0,this.length));Module.ChangeDocBackend(this.docId,
{ptr:Module.GetDoc(this.docId),buffer:e});this.data=null},getPos:function(){return this.position},getTotalSize:function(){return this.length},read:function(e,a,b){var c=this.data.length;b=b+a<c?b:c-a;e=e.subarray(a,a+b);a=this.data.subarray(this.position,this.position+b);e.set(a);this.position+=b;return b},write:function(e,a,b){for(var c=this.position+b,d=this.data.length;c>d;){var d=Math.max(d*(16777216<d?1.5:2),c),q=new Int8Array(d);q.set(this.data.subarray(0,this.length),0);this.data=q}e=e.subarray(a,
a+b);this.data.set(e,this.position);this.position+=b;this.position>this.length&&(this.length=this.position);return b}};var p={IsSink:function(e){return 66===e.flags},open:function(e){var a=e.path.slice(1);this.IsSink(e)?(e.provider=new m(a),Module.docs[a].sink=e.provider):e.provider=Module.docs[a].sink?new n(Module.docs[a].sink.data):Module.docs[a].chunkStorage?new t(Module.docs[a].chunkStorage):Module.docs[a].buffer?new n(Module.docs[a].buffer):new c(Module.docs[a].file)},close:function(e){e.provider.close()},
read:function(e,a,b,c,d){return e.provider.read(a,b,c)},llseek:function(e,a,b){e=e.provider;1===b?a+=e.getPos():2===b&&(a=e.getTotalSize()+a);if(0>a)throw new Module.FS.ErrnoError(Module.ERRNO_CODES.EINVAL);e.seek(a);return a},write:function(e,a,b,c,d){return e.provider.write(a,b,c)}};global.THROW=function(e){throw{type:"InvalidPDF",message:e};};global.REX=function(e){if(e){var a=THROW;e="Exception: \n\t Message: "+Module.Pointer_stringify(Module.f28(e))+"\n\t Filename: "+Module.Pointer_stringify(Module.f31(e))+
"\n\t Function: "+Module.Pointer_stringify(Module.f29(e))+"\n\t Linenumber: "+Module.Pointer_stringify(Module.f30(e));a(e)}};b.Initialize=function(e){var a=Module.Runtime.stackSave();e=e?Module.allocate(Module.intArrayFromString(e),"i8",Module.ALLOC_STACK):0;REX(Module.f32(e));REX(Module.f33(2));Module.Runtime.stackRestore(a)};b.GetDoc=function(e){if(e in Module.docs)return Module.docs[e].ptr;throw{type:"InvalidDocReference",message:"Unable to access Document id="+e+". The document appears to be invalid or was deleted."};
};b.clearDocBackend=function(){null!==Module.cache_ptr?(Module.has_buf_ownership&&Module._free(Module.cache_ptr),Module.cache_ptr=null):Module.docs[b.currentFileString]&&delete Module.docs[b.currentFileString]};b.MakeDev=function(e){if(!f[e]){var a=FS.makedev(3,5);FS.registerDevice(a,p);FS.mkdev(e,511,a);f[e]=!0}};b.CreateDocFileBackend=function(e,a){Module.MakeDev(a);var b=Module.allocate(4,"i8",Module.ALLOC_STACK);Module.docs[a]={file:e};var c=Module.allocate(Module.intArrayFromString(a),"i8",Module.ALLOC_STACK);
REX(Module.f34(c,b));b=Module.getValue(b,"i8*");Module.docs[a].ptr=b};b.InsertImageIntoDoc=function(e,a){var b=[];try{var c=Module.ElementBuilderCreate();b.push(function(){Module.ElementBuilderDestroy(c)});var d=Module.ElementWriterCreate();b.push(function(){Module.ElementWriterDestroy(d)});var q=Module.ImageGetImageWidth(a),f=Module.ImageGetImageHeight(a),g=q/f;1<g?(q=612,f=parseInt(q/g)):(f=792,q=parseInt(f*g));var h=Module.ElementBuilderCreateImage(c,a,0,0,q,f),p=Module.PDFDocPageCreate(e,q,f);
Module.ElementWriterBegin(d,p);Module.ElementWriterWritePlacedElement(d,h);Module.ElementWriterEnd(d);Module.PDFDocPagePushBack(e,p)}finally{b.forEach(function(e){e()})}};var r=function(e,a,b){"object"===typeof e?(this.m_pages=e.m_pages,this.m_has_named_dests=e.m_has_named_dests,this.m_finished_download=e.m_finished_download,this.m_has_outline=e.m_has_outline,this.m_current_page=e.m_current_page,this.m_id=e.m_id,this.size=e.size,this.timeout=e.timeout,this.eventPageArray=e.eventPageArray,this.requirePageCapabilities=
e.requirePageCapabilities):(this.m_pages=[],this.m_has_outline=this.m_finished_download=this.m_has_named_dests=!1,this.m_current_page=1,this.m_id=b,this.size=e,this.timeout=null,this.eventPageArray=[],this.requirePageCapabilities={});this.downloadUserData=Module.createDownloadUserData(a,b)};r.prototype={getJSUrl:function(){return Module.extractDownloadUserData(this.downloadUserData).url},getDocId:function(){return Module.extractDownloadUserData(this.downloadUserData).docId},destroyUserData:function(){this.m_id in
Module.customHeadersMap&&delete Module.customHeadersMap[this.m_id];Module.destroyDownloadUserData(this.downloadUserData)}};b.createDownloadUserData=function(e,a){var b=Module.allocate(Module.intArrayFromString(e),"i8",Module.ALLOC_NORMAL),c=Module.allocate(8,"i8",Module.ALLOC_NORMAL);Module.setValue(c,b,"i8*");Module.setValue(c+4,parseInt(a),"i32");return this.downloadUserData=c};b.extractDownloadUserData=function(e){var a=Module.getValue(e,"i8*"),a=Module.Pointer_stringify(a);e=Module.getValue(e+
4,"i32").toString();return{url:a,docId:e}};b.destroyDownloadUserData=function(e){Module._free(Module.getValue(e,"i8*"));Module._free(e)};global.downloadDataMap={};Module.customHeadersMap={};b.GetDownloadData=function(e){if(e in downloadDataMap)return downloadDataMap[e]};b.DownloaderHint=function(e,a){var b=Module.GetDoc(e),c=downloadDataMap[b];a.currentPage&&(c.m_current_page=a.currentPage);if(a.visiblePages){for(var d=a.visiblePages,q=0;q<d.length;++q)++d[q];for(var f in this.requirePageCapabilities)this.requirePageCapabilities.hasOwnProperty(f)&&
d.push(parseInt(f));(q=Module.docs[e].chunkStorage)&&q.keepVisibleChunks(c.downloader,d);c=d.length;f=Module.allocate(4*c,"i8",Module.ALLOC_STACK);for(q=0;q<c;++q)Module.setValue(f+4*q,d[q],"i32");REX(Module.f35(b,f,c,1,0))}};b.RequirePage=function(e,a,b){e=Module.GetDoc(e);var c=downloadDataMap[e];c&&!c.m_pages[a]?(a in c.requirePageCapabilities?c.requirePageCapabilities[a].push(b):c.requirePageCapabilities[a]=[b],b=Module.allocate(4,"i8",Module.ALLOC_STACK),Module.setValue(b,a,"i32"),Module.f35(e,
b,1,0,0)):b.resolve()};b.IsLinearizationValid=function(e){e=Module.GetDoc(e);if(e=downloadDataMap[e]){var a=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f36(e.downloader,a));return 0!==Module.getValue(a,"i8")}return!1};b.ShouldRunRender=function(a,b){var c=Module.GetDoc(a);return(c=downloadDataMap[c])?c.m_pages[b]:!0};b.createCallbacksStruct=function(a){if(!g){var b=function(a){return function(e,b,k,c){var d=arguments;e in downloadDataMap?a.apply(this,d):setTimeout(function(){e in downloadDataMap&&
a.apply(this,d)},0)}};g={downloadProc:Runtime.addFunction(function(a,e,b,k,c){k=Module.extractDownloadUserData(k);var f=k.docId;d(k.url,e,b,Module.customHeadersMap[f]).then(function(k){f in Module.docs&&Module.docs[f].chunkStorage&&Module.docs[f].chunkStorage.writeChunk(k,e);Module.f37(0,e,b,a)})}),notifyUpdatePage:Runtime.addFunction(b(function(a,e,b,k){var c=downloadDataMap[a];c.m_pages[e]=!0;var d=c.eventPageArray;if(e in c.requirePageCapabilities)for(b=c.requirePageCapabilities[e],k=0;k<b.length;++k)b[k].resolve();
c.timeout?d.push(e):(d=c.eventPageArray=[e],c.timeout=setTimeout(function(){Module.postPagesUpdatedEvent(a,c.m_id,d);c.timeout=null},100))})),notifyUpdateOutline:Runtime.addFunction(b(function(a,e){var b=downloadDataMap[a];b.m_has_outline||(b.m_has_outline=!0,Module.postEvent(b.m_id,"bookmarksUpdated",{}))})),notifyUpdateNamedDests:Runtime.addFunction(b(function(a,e){var b=downloadDataMap[a];b.m_has_named_dests||(b.m_has_named_dests=!0)})),notifyUpdateThumb:Runtime.addFunction(b(function(a,e){})),
notifyFinishedDownload:Runtime.addFunction(b(function(a,e){var b=downloadDataMap[a];b.m_finished_download||(b.m_finished_download=!0,Module.postEvent(b.m_id,"documentComplete",{}))})),notifyDocumentError:Runtime.addFunction(function(a,e){}),getCurrentPage:Runtime.addFunction(function(a,e){return downloadDataMap[a].m_current_page})}}b=Module.allocate(40,"i8",Module.ALLOC_STACK);Module.setValue(b,g.downloadProc,"i8*");Module.setValue(b+4,a,"i8*");Module.setValue(b+8,g.notifyUpdatePage,"i8*");Module.setValue(b+
12,g.notifyUpdateOutline,"i8*");Module.setValue(b+16,g.notifyUpdateNamedDests,"i8*");Module.setValue(b+20,g.notifyUpdateThumb,"i8*");Module.setValue(b+24,g.notifyFinishedDownload,"i8*");Module.setValue(b+28,g.notifyDocumentError,"i8*");Module.setValue(b+32,g.getCurrentPage,"i8*");Module.setValue(b+36,0,"i8*");return b};b.CreateDocDownloaderBackend=function(a,b,c){var d=a.url,f=a.size,q=a.customHeaders;Module.allocate(Module.intArrayFromString(d),"i8",Module.ALLOC_NORMAL);q&&(Module.customHeadersMap[c]=
q);var g;g=a.downloadData?new r(a.downloadData,d,c,q):new r(a.size,d,c,q);var h=Module.createCallbacksStruct(g.downloadUserData),p=Module.allocate(4,"i8",Module.ALLOC_STACK);Module.MakeDev(c);a.chunkStorage?d=new l(a.chunkStorage):(a=new Int8Array(new ArrayBuffer(Math.ceil((a.size+524288-1)/524288/8))),d=new l(d,f,q,a));Module.docs[c]={chunkStorage:d};REX(Module.f38(h,f,Module.GetUStringFromJSString(c),p));g.downloader=Module.getValue(p,"i8*");if(f=Module.f39(g.downloader,b))Module.f40(g.downloader),
REX(f);b=Module.getValue(b,"i8*");Module.docs[c].ptr=b;Module.PDFDocInitSecurityHandler(b)&&REX(Module.f13(b,g.downloader));downloadDataMap[b]=g};b.CreateDocBackend=function(a,k,c){var d=Module.allocate(4,"i8",Module.ALLOC_STACK),f=Module.Runtime.stackSave();try{if(a){var q,g=k&&"pdf"!=k;if("object"==typeof a&&a.url)b.CreateDocDownloaderBackend(a,d,c);else{var p=a instanceof ArrayBuffer,l=p?"buffer":"file";if(p&&(a=new Uint8Array(a),10485760>a.length+h&&!g)){h+=a.length;var n=a.length,m=Module._malloc(a.length);
Module.HEAPU8.set(a,m);REX(Module.f42(m,n,d));q=Module.getValue(d,"i8*");Module.docs[c]={ptr:q,bufPtr:m,bufPtrSize:n,ownership:!0};Module.docs[c].extension=k;return}Module.MakeDev(c);p={};p[l]=a;Module.docs[c]=p;if(g){var r=Module.GetUStringFromJSString(c);REX(Module.f41(d));q=Module.getValue(d,"i8*");var t=Module.ImageCreateFromFile(q,r);Module.InsertImageIntoDoc(q,t)}else{var D=Module.allocate(Module.intArrayFromString(c),"i8",Module.ALLOC_STACK);REX(Module.f34(D,d));q=Module.getValue(d,"i8*")}Module.docs[c].extension=
k;Module.docs[c].ptr=q}}else REX(Module.f41(d)),q=Module.getValue(d,"i8*"),Module.docs[c]={ptr:q},Module.docs[c].extension=k}finally{Module.Runtime.stackRestore(f)}};b.ChangeDocBackend=function(a,k){var c=Module.docs[a];c?(c.bufPtr&&c.ownership&&(Module._free(c.bufPtr),h-=c.bufPtrSize),delete Module.docs[a]):b.utils.warn("Trying to delete document "+a+" that does not exist.");Module.docs[a]=k};b.DeleteDoc=function(a){var k=Module.docs[a];k?(k.ptr&&(k.ptr in downloadDataMap&&(clearTimeout(downloadDataMap[k.ptr].timeout),
downloadDataMap[k.ptr].destroyUserData(),delete downloadDataMap[k.ptr]),Module.PDFDocDestroy(k.ptr)),k.bufPtr&&k.ownership&&(Module._free(k.bufPtr),h-=k.bufPtrSize),delete Module.docs[a]):b.utils.warn("Trying to delete document "+a+" that does not exist.")};b.CreateDoc=function(e,k,c){if(!c){do c=(++a).toString();while(c in Module.docs)}Module.has_buf_ownership=!0;b.CreateDocBackend(e,k,c);return c};b.CreateEmptyDoc=function(){var e=(++a).toString(),b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f41(b));
b=Module.getValue(b,"i8*");Module.docs[e]={ptr:b};return e};b.GetPageCount=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f43(a,b));return Module.getValue(b,"i8*")};b.GetPage=function(a,b){var c=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f44(a,b,c));c=Module.getValue(c,"i8*");Module.PageIsValid(c)||THROW("Trying to access page that doesn't exist at index "+b);return c};b.PageGetPageWidth=function(a){var b=Module.allocate(8,"i8",Module.ALLOC_STACK);REX(Module.f45(a,
1,b));return Module.getValue(b,"double")};b.PageGetPageHeight=function(a){var b=Module.allocate(8,"i8",Module.ALLOC_STACK);REX(Module.f46(a,1,b));return Module.getValue(b,"double")};b.PageGetDefaultMatrix=function(a,b){var c=Module.allocate(48,"i8",Module.ALLOC_STACK);b||(b=0);REX(Module.f17(a,!0,1,b,c));return c};b.GetMatrixAsArray=function(a){for(var b=[],c=0;6>c;++c)b[c]=Module.getValue(a+8*c,"double");return b};b.PageGetPageInfo=function(a){var b=Module.allocate(48,"i8",Module.ALLOC_STACK),c=
Module.allocate(8,"i8",Module.ALLOC_STACK),d=Module.allocate(8,"i8",Module.ALLOC_STACK),f=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f47(a,!0,1,0,c,d,b,f));return{rotation:Module.getValue(f,"i8*"),width:Module.getValue(c,"double"),height:Module.getValue(d,"double"),matrix:Module.GetMatrixAsArray(b)}};b.GetUStringFromJSString=function(a,b){var c=Module.allocate(4,"i8",Module.ALLOC_STACK),d=2*(a.length+1),f=Module.allocate(d,"i8",b?Module.ALLOC_NORMAL:Module.ALLOC_STACK);Module.stringToUTF16(a,
f,d);d=Module.f48(f,c);b&&Module._free(f);REX(d);return Module.getValue(c,"i8*")};b.GetJSStringFromUString=function(a){var b=Module.allocate(4,"i16*",Module.ALLOC_STACK);REX(Module.f50(a,b));return Module.UTF16ToString(Module.getValue(b,"i16*"))};b.GetJSStringFromCString=function(a){return Module.Pointer_stringify(a)};b.PDFNetSetResourceData=function(a){Module.res_ptr=Module._malloc(a.length);Module.HEAPU8.set(a,Module.res_ptr);REX(Module.f51(Module.res_ptr,a.length));Module.res_ptr_size=a.length};
b.PDFDrawSetDPI=function(a,b){REX(Module.f52(a,b))};b.PDFDocDestroy=function(a){REX(Module.f53(a))};b.PDFRasterizerCreate=function(){var a=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f54(0,a));return Module.getValue(a,"i8*")};b.PageGetRotation=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f55(a,b));return Module.getValue(b,"i8*")};b.PageGetId=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f56(a,b));b=Module.getValue(b,"i8*");a=Module.allocate(4,
"i8",Module.ALLOC_STACK);REX(Module.f57(b,a));a=Module.getValue(a,"i32");var c=Module.allocate(2,"i8",Module.ALLOC_STACK);REX(Module.f58(b,c));c=Module.getValue(c,"i16");return a+"-"+c};b.PageSetRotation=function(a,b){REX(Module.f59(a,b))};b.GetDefaultMatrixBox=function(a,b,c){var d=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f55(a,d));a=(Module.getValue(d,"i32")+c)%4;c=Module.allocate(48,"i8",Module.ALLOC_STACK);switch(a){case 0:return REX(Module.f60(c,1,0,0,-1,-b.x1,b.y2)),c;case 1:return REX(Module.f60(c,
0,1,1,0,-b.y1,-b.x1)),c;case 2:return REX(Module.f60(c,-1,0,0,1,b.x2,-b.y1)),c;case 3:return REX(Module.f60(c,0,-1,-1,0,b.y2,b.x2)),c}throw Error("Yikes, we don't support that rotation type");};b.Matrix2DMultBBox=function(a,b){var c=Module.allocate(8,"i8",Module.ALLOC_STACK),d=Module.allocate(8,"i8",Module.ALLOC_STACK);Module.setValue(c,b.x1,"double");Module.setValue(d,b.y1,"double");REX(Module.f61(a,c,d));b.x1=Module.getValue(c,"double");b.y1=Module.getValue(d,"double");Module.setValue(c,b.x2,"double");
Module.setValue(d,b.y2,"double");REX(Module.f61(a,c,d));b.x2=Module.getValue(c,"double");b.y2=Module.getValue(d,"double");return b};b.Matrix2DMult=function(a,b){var c=Module.allocate(8,"i8",Module.ALLOC_STACK),d=Module.allocate(8,"i8",Module.ALLOC_STACK);Module.setValue(c,b.x,"double");Module.setValue(d,b.y,"double");REX(Module.f61(a,c,d));b.x=Module.getValue(c,"double");b.y=Module.getValue(d,"double");return b};b.Matrix2DConcat=function(a,b){var c=Module.getValue(b,"double"),d=Module.getValue(b+
8,"double"),f=Module.getValue(b+16,"double"),q=Module.getValue(b+24,"double"),g=Module.getValue(b+32,"double"),h=Module.getValue(b+40,"double");REX(Module.f62(a,c,d,f,q,g,h))};b.Matrix2DSet=function(a,b,c,d,f,q,g){REX(Module.f60(a,b,c,d,f,q,g))};b.IteratorHasNext=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f63(a,b));return 0!=Module.getValue(b,"i8")};b.IteratorCurrent=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f64(a,b));return Module.getValue(Module.getValue(b,
"i8*"),"i8*")};b.IteratorNext=function(a){REX(Module.f65(a))};b.PageGetNumAnnots=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f66(a,b));return Module.getValue(b,"i32")};b.PageGetAnnot=function(a,b){var c=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f67(a,b,c));return Module.getValue(c,"i8*")};b.PageAnnotRemove=function(a,b){REX(Module.f68(a,b))};b.AnnotGetType=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f69(a,b));return Module.getValue(b,
"i32")};b.AnnotHasAppearance=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f70(a,0,0,b));return 0!=Module.getValue(b,"i8*")};b.AnnotRefreshAppearance=function(a){REX(Module.f71(a))};b.ObjErase=function(a,b){var c=Module.allocate(Module.intArrayFromString(b),"i8",Module.ALLOC_STACK);REX(Module.f72(a,c))};b.GetJSDoubleArrFromCore=function(a,b){for(var c=Array(b),d=a,f=0;f<b;++f)c[f]=Module.getValue(d,"double"),d+=8;return c};b.GetJSIntArrayFromCore=function(a,b){for(var c=
Array(b),d=a,f=0;f<b;++f)c[f]=Module.getValue(d,"i32"),d+=4;return c};b.BookmarkIsValid=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f73(a,b));return 0!=Module.getValue(b,"i8")};b.BookmarkGetNext=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f74(a,b));return Module.getValue(b,"i8*")};b.BookmarkGetFirstChild=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f75(a,b));return Module.getValue(b,"i8*")};b.BookmarkHasChildren=function(a){var b=
Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f76(a,b));return 0!=Module.getValue(b,"i8")};b.BookmarkGetAction=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f77(a,b));return Module.getValue(b,"i8*")};b.BookmarkGetTitle=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f78(a,b));a=Module.getValue(b,"i8*");return Module.GetJSStringFromUString(a)};b.ActionIsValid=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f79(a,b));
return 0!=Module.getValue(b,"i8")};b.ActionGetType=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f80(a,b));return Module.getValue(b,"i32")};b.ActionGetDest=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f81(a,b));return Module.getValue(b,"i8*")};b.DestinationIsValid=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f82(a,b));return 0!=Module.getValue(b,"i8")};b.DestinationGetPage=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);
REX(Module.f83(a,b));return Module.getValue(b,"i8*")};b.PageIsValid=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f84(a,b));return 0!=Module.getValue(b,"i8")};b.PageGetIndex=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f85(a,b));return Module.getValue(b,"i32")};b.ObjGetAsPDFText=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f86(a,b));a=Module.getValue(b,"i8*");return Module.GetJSStringFromUString(a)};b.ObjFindObj=function(a,
b){var c=Module.allocate(4,"i8",Module.ALLOC_STACK),d=allocate(intArrayFromString(b),"i8",ALLOC_STACK);REX(Module.f87(a,d,c));return Module.getValue(c,"i8*")};b.PDFDocGetFirstBookmark=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f88(a,b));return Module.getValue(b,"i8*")};b.DestinationGetExplicitDestObj=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f89(a,b));return Module.getValue(b,"i8*")};b.DestinationGetFitType=function(a){var b=Module.allocate(4,
"i8",Module.ALLOC_STACK);REX(Module.f90(a,b));return Module.getValue(b,"i32")};b.ObjIsNumber=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f91(a,b));return 0!=Module.getValue(b,"i8")};b.ObjGetNumber=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f92(a,b));return Module.getValue(b,"double")};b.PDFDocGetRoot=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f93(a,b));return Module.getValue(b,"i8*")};b.ObjPutName=function(a,b,c){b=
allocate(intArrayFromString(b),"i8",ALLOC_STACK);c=allocate(intArrayFromString(c),"i8",ALLOC_STACK);var d=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f94(a,b,c,d));return Module.getValue(d,"i8*")};b.ObjPutDict=function(a,b){var c=allocate(intArrayFromString(b),"i8",ALLOC_STACK),d=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f95(a,c,d));return Module.getValue(d,"i8*")};b.ObjPutString=function(a,b,c){b=allocate(intArrayFromString(b),"i8",ALLOC_STACK);c=allocate(intArrayFromString(c),
"i8",ALLOC_STACK);var d=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f96(a,b,c,d));return Module.getValue(d,"i8*")};b.ObjPut=function(a,b,c){b=allocate(intArrayFromString(b),"i8",ALLOC_STACK);var d=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f97(a,b,c,d));return Module.getValue(d,"i8*")};b.ObjGetAt=function(a,b){var c=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f98(a,b,c));return Module.getValue(c,"i8*")};b.Matrix2DInverse=function(a){var b=Module.allocate(48,"i8",Module.ALLOC_STACK);
REX(Module.f99(a,b));return b};b.PDFDocInitSecurityHandler=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f100(a,0,b));return 0!=Module.getValue(b,"i8")};b.PDFDocInitStdSecurityHandler=function(a,b){var c=Module.allocate(4,"i8",Module.ALLOC_STACK),d=Module.intArrayFromString(b),f=Module.allocate(d,"i8",Module.ALLOC_STACK);REX(Module.f101(a,f,d.length-1,c));return 0!=Module.getValue(c,"i8")};b.PDFDocFDFExtract=function(a,b){var c=Module.allocate(4,"i8",Module.ALLOC_STACK);
b?REX(Module.f102(a,b,2,c)):REX(Module.f103(a,2,c));return Module.getValue(c,"i8*")};b.PDFDocInsertPages=function(a,b,c,d,f){REX(Module.f104(a,b,c,d,f?1:0,0))};b.PDFDocMovePages=function(a,b,c){REX(Module.f105(a,b,a,c,0,0))};b.PDFDocGetPageIterator=function(a,b){var c=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f106(a,b,c));return Module.getValue(c,"i8*")};b.PDFDocPageRemove=function(a,b){REX(Module.f107(a,b))};b.PDFDocPageCreate=function(a,b,c){var d=Module.allocate(40,"i8",Module.ALLOC_STACK);
Module.setValue(d,0,"double");Module.setValue(d+8,0,"double");Module.setValue(d+16,b,"double");Module.setValue(d+24,c,"double");Module.setValue(d+32,0,"double");b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f108(a,d,b));return Module.getValue(b,"i8*")};b.PDFDocPageInsert=function(a,b,c){REX(Module.f109(a,b,c))};b.PageSetCreate=function(){var a=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f110(a));return Module.getValue(a,"i8*")};b.PageSetCreateRange=function(a,b){var c=Module.allocate(4,
"i8",Module.ALLOC_STACK);REX(Module.f111(c,a,b));return Module.getValue(c,"i8*")};b.PageSetAddPage=function(a,b){REX(Module.f112(a,b))};b.FDFDocSaveAsXFDF=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(f113(a,b));a=Module.getValue(b,"i8*");return Module.GetJSStringFromUString(a)};b.ElementBuilderCreate=function(){var a=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f114(a));return Module.getValue(a,"i8*")};b.ElementBuilderDestroy=function(a){REX(Module.f115(a))};b.ElementBuilderCreateImage=
function(a,b,c,d,f,q){var g=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f116(a,b,c,d,f,q,g));return Module.getValue(g,"i8*")};b.ElementWriterCreate=function(){var a=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f117(a));return Module.getValue(a,"i8*")};b.ElementWriterDestroy=function(a){REX(Module.f118(a))};b.ElementWriterBegin=function(a,b){REX(Module.f119(a,b,1))};b.ElementWriterWritePlacedElement=function(a,b){REX(Module.f120(a,b))};b.ElementWriterEnd=function(a){var b=Module.allocate(4,
"i8",Module.ALLOC_STACK);REX(Module.f121(a,b))};b.ImageGetImageWidth=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f122(a,b));return Module.getValue(b,"i32")};b.ImageGetImageHeight=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f123(a,b));return Module.getValue(b,"i32")};b.ImageCreateFromMemory2=function(a,b,c){var d=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f124(a,b,c,0,d));return Module.getValue(d,"i8*")};b.ImageCreateFromFile=function(a,
b){var c=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f125(a,b,0,c));return Module.getValue(c,"i8*")};b.PDFDocPagePushBack=function(a,b){REX(Module.f126(a,b))};b.PDFDocHasOC=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f127(a,b));return 0!=Module.getValue(b,"i8")};b.PDFDocGetOCGConfig=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f128(a,b));return Module.getValue(b,"i8*")};b.OCGContextCreate=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);
REX(Module.f129(a,b));return Module.getValue(b,"i8*")};b.UStringDestroy=function(a){REX(Module.f20(a))};b.FDFDocDestroy=function(a){REX(Module.f130(a))}})(global.Module);!function(b){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=b();else if("function"==typeof define&&define.amd)define([],b);else{var h;"undefined"!=typeof window?h=window:"undefined"!=typeof global?h=global:"undefined"!=typeof self&&(h=self);h.PriorityQueue=b()}}(function(){return function h(a,f,g){function d(l,n){if(!f[l]){if(!a[l]){var m="function"==typeof require&&require;if(!n&&m)return m(l,!0);if(c)return c(l,!0);m=Error("Cannot find module '"+l+"'");throw m.code="MODULE_NOT_FOUND",
m;}m=f[l]={exports:{}};a[l][0].call(m.exports,function(c){var f=a[l][1][c];return d(f?f:c)},m,m.exports,h,a,f,g)}return f[l].exports}for(var c="function"==typeof require&&require,n=0;n<g.length;n++)d(g[n]);return d}({1:[function(h,a,f){var g={}.hasOwnProperty,d=function(a,d){function f(){this.constructor=a}for(var h in d)g.call(d,h)&&(a[h]=d[h]);f.prototype=d.prototype;a.prototype=new f;a.__super__=d.prototype;return a};f=h("./PriorityQueue/AbstractPriorityQueue");h=h("./PriorityQueue/ArrayStrategy");
f=function(a){function f(a){a||(a={});a.strategy||(a.strategy=BinaryHeapStrategy);a.comparator||(a.comparator=function(a,c){return(a||0)-(c||0)});f.__super__.constructor.call(this,a)}d(f,a);return f}(f);f.ArrayStrategy=h;a.exports=f},{"./PriorityQueue/AbstractPriorityQueue":2,"./PriorityQueue/ArrayStrategy":3}],2:[function(h,a,f){a.exports=function(){function a(d){if(null==(null!=d?d.strategy:void 0))throw"Must pass options.strategy, a strategy";if(null==(null!=d?d.comparator:void 0))throw"Must pass options.comparator, a comparator";
this.priv=new d.strategy(d);this.length=0}a.prototype.queue=function(a){this.length++;this.priv.queue(a)};a.prototype.dequeue=function(a){if(!this.length)throw"Empty queue";this.length--;return this.priv.dequeue()};a.prototype.peek=function(a){if(!this.length)throw"Empty queue";return this.priv.peek()};a.prototype.remove=function(a){this.priv.remove(a)&&--this.length};a.prototype.find=function(a){return 0<=this.priv.find(a)};a.prototype.removeAllMatching=function(a,c){var f=this.priv.removeAllMatching(a,
c);this.length-=f};return a}()},{}],3:[function(h,a,f){var g;g=function(a,c,f){var g,h,m;h=0;for(g=a.length;h<g;)m=h+g>>>1,0<=f(a[m],c)?h=m+1:g=m;return h};a.exports=function(){function a(c){var d;this.options=c;this.comparator=this.options.comparator;this.data=(null!=(d=this.options.initialValues)?d.slice(0):void 0)||[];this.data.sort(this.comparator).reverse()}a.prototype.queue=function(a){var d;d=g(this.data,a,this.comparator);this.data.splice(d,0,a)};a.prototype.dequeue=function(){return this.data.pop()};
a.prototype.peek=function(){return this.data[this.data.length-1]};a.prototype.find=function(a){var d=g(this.data,a,this.comparator)-1;return 0<=d&&!this.comparator(this.data[d],a)?d:-1};a.prototype.remove=function(a){a=this.find(a);return 0<=a?(this.data.splice(a,1),!0):!1};a.prototype.removeAllMatching=function(a,d){for(var f=0,g=this.data.length-1;0<=g;--g)if(a(this.data[g])){var h=this.data.splice(g,1)[0];d&&d(h);++f}return f};return a}()},{}]},{},[1])(1)});(function(b){b.SetupPDFNetFunctions=function(h){Module._IB_=[];for(var a=function(b){if("object"===typeof b&&null!==b)if(b.byteLength){var c=Module._IB_.length;Module._IB_[c]=new Uint8Array(b);b={handle:c,isArrayBufferRef:!0}}else for(prop in b)b.hasOwnProperty(prop)&&(b[prop]=a(b[prop]));return b},f=function(a){if("object"===typeof a&&null!==a)if(a.buffer)a=a.buffer.slice(a.byteOffset,a.byteOffset+a.length);else if(a.isArrayBufferRef)a=Module._IB_[a.handle].buffer;else for(prop in a)a.hasOwnProperty(prop)&&
(a[prop]=f(a[prop]));return a},g=Module.f857(),d,c=Module.f254(g),n=function(b,c,d){b=a(b);b=(b=b.docId)?Module.GetDoc(b):0;(d=Module.EMSCallSharedFunction(g,d,b))?c.reject({type:"InvalidPDF",message:GetErrToString(d)}):(d=Module.EMSGetLastResponse(g),d=f(d),c.resolve(d));Module._IB_=[]};d=Module.f615(c);)d=Module.GetJSStringFromCString(d),b.queue.onAsync(d,n);Module.f629(c);if(Module.f1023){var l={},c=function(a,b){h.on(a,b);l[a]=!0};Module.docPtrStringToIdMap={};var t=function(a){if(a in Module.docPtrStringToIdMap)return Module.docPtrStringToIdMap[a];
throw Error("Couldn't find document "+a);};b.queue.onAsync("PDFDoc.RequirePage",function(a,b){Module.RequirePage(t(a.docId),a.pageNum,b)});c("pdfDocCreateFromBuffer",function(a){a=Module.CreateDoc(a.buf);var b=Module.GetDoc(a).toString(16);Module.docPtrStringToIdMap[b]=a;return b});c("PDFDoc.destroy",function(a){a=t(a.auto_dealloc_obj);Module.DeleteDoc(a)});c("PDFDoc.saveMemoryBuffer",function(a){var b=t(a.doc);return Module.SaveHelper(Module.GetDoc(b),b,a.flags).slice(0)});c("pdfDocCreate",function(a){a=
Module.CreateDoc(a.buf);var b=Module.GetDoc(a).toString(16);Module.docPtrStringToIdMap[b]=a;return b});c("GetPDFDoc",function(a){a=a.docId;var b=Module.GetDoc(a).toString(16);Module.docPtrStringToIdMap[b]=a;return b});c("ExtractPDFNetLayersContext",function(a){var b=a.layers;a=Module.GetDoc(a.docId);var c=0;b?c=Module.EMSCreateUpdatedLayersContext(a,b):Module.PDFDocHasOC(a)&&(b=Module.PDFDocGetOCGConfig(a),c=Module.OCGContextCreate(b));return c.toString(16)});for(var m=Module.f1023(),c=Module.f254(m),
n=function(b,c){b=a(b);var d=Module.EMSCallPDFNetFunction(m,b);d?c.reject({type:"InvalidPDF",message:GetErrToString(d)}):(d=Module.EMSGetLastResponse(m),d=f(d),c.resolve(d))};d=Module.f615(c);)if(d=Module.GetJSStringFromCString(d),!l[d])h.onAsync(d,n);Module.f629(c)}}})("undefined"===typeof self?this:self);var isChrome=function(){var b=self.navigator.userAgent.match(/OPR/),h=self.navigator.userAgent.match(/Maxthon/),a=self.navigator.userAgent.match(/Edge/);return self.navigator.userAgent.match(/Chrome\/(.*?) /)&&!b&&!h&&!a}(),loadPDFNetC=function(){if(isChrome){var b=new XMLHttpRequest;b.open("GET","PDFNetC.js",!1);b.responseType="text";b.send();if(200==b.status)b=b.responseText,b=b.split('"use asm";').join(""),eval.call(self,b);else throw Error("Failed to load PDFNetC.js");}else importScripts("PDFNetC.js")};
self.shouldResize||loadPDFNetC();
(function(b){b.EmscriptenPDFManager=function(){return this};b.EmscriptenPDFManager.prototype={LoadRes:function(a,b){Module.loadResources(a,b)},OnInitialized:function(a){Module.loaded?a():(Module.init_cb=function(){a()},b.utils.log("PDFNet is not initialized yet!"))},NewDoc:function(a,b,g,d){try{g.resolve(Module.loadDoc(a,b,d))}catch(c){Module.stopped||g.reject(c)}},DeleteDocument:function(a){Module.DeleteDoc(a)},UpdatePassword:function(a,b){return Module.UpdatePassword(a,b)},GetCanvas:function(a,
b,g,d,c,h,l,t,m){Module.loadCanvas(a,b,g,d,c,h,l,t,m)},GetCanvasProgressive:function(){return Module.GetCurrentCanvasData(!0)},LoadBookmarks:function(a){return Module.LoadBookmarks(a)},LoadText:function(a,b,g){Module.GetTextData(a,b+1,g)},SaveDoc:function(a,b,g,d,c){Module.SaveDoc(a,b,g,d,c)},CancelCurrent:function(){return Module.cancelCurrent()},LoadAnnotations:function(a,b){var g;b?(g=Module.PageArrayToPageSet(b),g=Module.PDFDocExportXFDF(a,g)):g=Module.PDFDocExportXFDF(a);return g},SetWorkerRestartCallback:function(a){Module.SetWorkerRestartCallback(a)},
Initialize:function(a,b){a&&(Module.TOTAL_MEMORY=a);Module.memoryInitializerPrefixURL=b;loadPDFNetC()},MergeXFDF:function(a,b,g){return Module.MergeXFDF(a,b,g)},InsertPages:function(a,b,g,d,c,h){return Module.InsertPages(a,b,g,d,c,h)},MovePages:function(a,b,g,d){return Module.MovePages(a,b,g,d)},RemovePages:function(a,b,g){return Module.RemovePages(a,b,g)},RotatePages:function(a,b,g,d){return Module.RotatePages(a,b,g,d)},ExtractPages:function(a,b,g,d){return Module.ExtractPages(a,b,g,d)},CropPages:function(a,
b,g,d,c,h,l){return Module.CropPages(a,b,g,d,c,h,l)},DownloaderHint:function(a,b){return Module.DownloaderHint(a,b)},IsLinearizationValid:function(a){return Module.IsLinearizationValid(a)},shouldRunRender:function(a){return Module.ShouldRunRender(a.docId,a.pageIndex+1)},Stop:function(){Module.stopped=!0},InsertBlankPages:function(a,b,g,d,c){Module.InsertBlankPages(a,b,g,d,c)}};var h={setup:function(a){function f(f,d){b.utils.log("Redirected "+f.callbackId);a.send("redirect_request",f)}a.replaceAsync("test",
f);a.replaceAsync("NewDoc",f);a.replaceAsync("UpdatePassword",f);a.replaceAsync("LoadRes",f);a.replaceAsync("GetCanvas",f);a.replaceAsync("GetCanvasPartial",f);a.replaceAsync("LoadText",f);a.replaceAsync("SaveDoc",f);a.replaceAsync("LoadBookmarks",f);a.replaceAsync("GetCanvasProgressive",f);a.replaceAsync("LoadAnnotations",f);a.replaceAsync("actionCancel",f)}};(function(a){function f(a){var b=a.data,d=a.action,e;e="GetCanvas"==d||"GetCanvasPartial"==d?n.shouldRunRender(b):!0;e?(k=a,l.actionMap[d](b,
a.asyncCallCapability,a)):(deferredQueue.queue(a),c())}function g(a,b){a.asyncCallCapability=b;k?l.queue(a):f(a)}function d(c){self.shouldResize&&n.Initialize(c.options.workerHeapSize,c.options.pdfResourcePath);if(c.array instanceof Uint8Array){var d=255===c.array[0];a.postMessageTransfers=d;"response"in new XMLHttpRequest?n.OnInitialized(function(){n.SetWorkerRestartCallback(function(b,c,d){h.setup(a);var f=[],g;k&&(k.asyncCallCapability=void 0,f.push(k));for(var q=l.length,m=0;m<q;++m)g=l.dequeue(),
g.asyncCallCapability=void 0,f.push(g);a.send("worker_restart",{size:b,queue:f,docData:d,resData:c,workerPath:t,location:t+"pdf/ResizableWorker.js"});n.Stop();k&&(n.CancelCurrent(),k=null);e();k=null});var f=function(){r();a.send("test",{supportTypedArray:!0,supportTransfers:d})};b.SetupPDFNetFunctions(a);if(self.shouldResize)if(c.resData&&(n.LoadRes(c.resData),t=c.workerPath),c.docData){var g=c.docData,m=[],p;for(p in g){var u=createPromiseCapability();m.push(u.promise);n.NewDoc(g[p].source,g[p].extension,
u,p)}Promise.all(m).then(function(){f()})}else f();else f()}):a.send("test",!1)}else a.send("test",!1)}function c(){if(!k||"BeginOperation"!=k.action)if(l.length){if(!k||k.priority!=u){var a=l.dequeue();f(a)}}else k=null}var n=new b.EmscriptenPDFManager,l,t,m=!1,p=!1;Module.workerMessageHandler=a;var r=function(){m?p||(a.send("workerLoaded",{}),p=!0):m=!0};n.OnInitialized(r);var e=function(){b.queue=l=new PriorityQueue({strategy:PriorityQueue.ArrayStrategy,comparator:function(a,b){return a.priority===
b.priority?a.callbackId-b.callbackId:b.priority-a.priority}});b.deferredQueue=new PriorityQueue({strategy:PriorityQueue.ArrayStrategy,comparator:function(a,b){return a.priority===b.priority?a.callbackId-b.callbackId:b.priority-a.priority}});l.actionMap={};l.onAsync=function(b,c){a.onAsync(b,g);l.actionMap[b]=c}};e();var k=null;a.on("test",d);a.on("InitWorker",d);var v=function(a){k&&a(k)&&(n.CancelCurrent(),k=null);l.removeAllMatching(a,function(a){a.asyncCallCapability.reject({type:"Cancelled",message:"Operation was cancelled due to document deletion."})})},
w=function(a){v(function(b){return b.data&&b.data.docId===a})};a.on("UpdatePassword",function(a){return n.UpdatePassword(a.docId,a.password)});a.on("LoadRes",function(a){t=a.workerPath;n.LoadRes(a.array,a.l);return{}});a.on("DownloaderHint",function(a){n.DownloaderHint(a.docId,a.hint)});a.on("IsLinearized",function(a){return n.IsLinearizationValid(a.docId)});a.onNextAsync(c);l.onAsync("NewDoc",function(a,b){n.NewDoc(a.value,a.extension,b)});l.onAsync("GetCanvas",function(a,b){n.GetCanvas(a.docId,
a.pageIndex,a.width,a.height,a.rotation,null,a.layers,a.overprintMode,b)});l.onAsync("GetCanvasPartial",function(a,b){n.GetCanvas(a.docId,a.pageIndex,a.width,a.height,a.rotation,a.bbox,a.layers,a.overprintMode,b)});l.onAsync("LoadText",function(a,b){n.LoadText(a.docId,a.pageIndex,b)});l.onAsync("SaveDoc",function(a,b){n.SaveDoc(a.docId,a.xfdfString,a.finishedWithDocument,a.printDocument,b)});l.onAsync("MergeXFDF",function(a,b){n.MergeXFDF(a.docId,a.xfdf,b)});l.onAsync("InsertPages",function(a,b){n.InsertPages(a.docId,
a.doc,a.pageArray,a.destPos,a.insertBookmarks,b)});l.onAsync("MovePages",function(a,b){n.MovePages(a.docId,a.pageArray,a.destPos,b)});l.onAsync("RemovePages",function(a,b){n.RemovePages(a.docId,a.pageArray,b)});l.onAsync("RotatePages",function(a,b){n.RotatePages(a.docId,a.pageArray,a.rotation,b)});l.onAsync("ExtractPages",function(a,b){n.ExtractPages(a.docId,a.pageArray,a.xfdfString,b)});l.onAsync("CropPages",function(a,b){n.CropPages(a.docId,a.pageArray,a.topMargin,a.botMargin,a.leftMargin,a.rightMargin,
b)});l.onAsync("InsertBlankPages",function(a,b){n.InsertBlankPages(a.docId,a.pageArray,a.width,a.height,b)});l.onAsync("BeginOperation",function(a,b){b.resolve()});var u=99999;a.on("FinishOperation",function(b){if("BeginOperation"==k.action)a.onNextAsync(c),n.CancelCurrent(),k=null;else throw{message:"Operation has not started."};});a.on("DeleteDocument",function(a){a=a.docId;w(a);n.DeleteDocument(a)});a.on("LoadBookmarks",function(a){return n.LoadBookmarks(a.docId)});a.on("GetCanvasProgressive",
function(a){var b;if(k&&k.callbackId===a.callbackId)b=n.GetCanvasProgressive();else{if(l.find({priority:0,callbackId:a.callbackId}))throw{type:"Queued",message:"Rendering has not started yet."};if(deferredQueue.find({priority:0,callbackId:a.callbackId}))throw{type:"Queued",message:"Rendering has not started yet."};}if(!b)throw{type:"Unavailable",message:"Rendering is complete or was cancelled."};return b});a.on("LoadAnnotations",function(a){return{xfdfString:n.LoadAnnotations(a.docId,a.pages)}});
a.on("actionCancel",function(a){k&&k.callbackId===a.callbackId?n.CancelCurrent()&&setTimeout(function(){c()},0):(l.remove({priority:0,callbackId:a.callbackId}),deferredQueue.remove({priority:0,callbackId:a.callbackId}))})})(new MessageHandler("worker_processor",this))})("undefined"===typeof window?this:window);
